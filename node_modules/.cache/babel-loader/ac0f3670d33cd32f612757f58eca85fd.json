{"ast":null,"code":"var _jsxFileName = \"/Users/mario/Documents/GitHub/whawhai/src/components/Router.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Register, Status } from \"../api/axios\";\nimport Dialog from \"./common/Dialog\";\nimport { errors } from \"../utils/errors\";\nimport Home from \"../views/Home\";\nimport SelectWarrior from \"../views/SelectWarrior\";\nimport Waiting from \"../views/Waiting\";\nimport Fighting from \"../views/Fighting\";\nimport Done from \"../views/Done\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Router = () => {\n  _s();\n\n  const [warrior, setWarrior] = useState({\n    name: \"\",\n    warriorType: 0,\n    attacks: [-99, -99, -99]\n  });\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [warriorSelection, setWarriorSelection] = useState(false);\n  const [waitingScreen, setWaitingScreen] = useState(false);\n  const [fightingScreen, setFightingScreen] = useState(false);\n  const [doneScreen, setDoneScreen] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [severity, setSeverity] = useState(\"info\");\n  const [fightResult, setFightResult] = useState({\n    ID: \"\",\n    Status: 0,\n    Warrior1: {\n      Name: \"\",\n      WarriorType: 0,\n      Attacks: [0]\n    },\n    Warrior2: {\n      Name: \"\",\n      WarriorType: 0,\n      Attacks: [0]\n    },\n    Rounds: [{\n      Warrior1Attack: 0,\n      Warrior2Attack: 0\n    }]\n  });\n  const warriorTypeSet = new Set([0, 1, 2, 3, 4]);\n  const warriorAttacksSet = new Set([0, 1, 2]);\n  const [currentFightId, setCurrentFightId] = useState(\"\");\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if ((waitingScreen || fightingScreen) && currentFightId) {\n        Status(currentFightId).then(result => {\n          if (result.data) {\n            if (result.data.result.fight.Status === 1) {\n              setWaitingScreen(false);\n              setFightingScreen(true);\n              setDoneScreen(false);\n              setFightResult(result.data.result.fight);\n            }\n\n            if (result.data.result.fight.Status === 2) {\n              setDialogOpen(false);\n              setWaitingScreen(false);\n              setFightingScreen(false);\n              setDoneScreen(true);\n              setFightResult(result.data.result.fight);\n            }\n          } else console.log(result);\n        });\n      }\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [waitingScreen, fightingScreen, currentFightId]);\n\n  const roundWinner = r => {\n    switch (r.Warrior1Attack) {\n      case 0:\n        {\n          if (r.Warrior2Attack === 0) return 0; //paper - paper: tie\n          else if (r.Warrior2Attack === 1) return 2; //paper - scissors - w2\n          else if (r.Warrior2Attack === 2) return 1; //paper - rock - w1\n\n          break;\n        }\n\n      case 1:\n        {\n          if (r.Warrior2Attack === 0) return 1; //scissors - paper: w1\n          else if (r.Warrior2Attack === 1) return 0; //scissors - scissors - tie\n          else if (r.Warrior2Attack === 2) return 2; //scissors - rock - w2\n\n          break;\n        }\n\n      case 2:\n        {\n          if (r.Warrior2Attack === 0) return 2; //rock - paper: w2\n          else if (r.Warrior2Attack === 1) return 1; //rock - scissors - w1\n          else if (r.Warrior2Attack === 2) return 0; //rock - rock - tie\n\n          break;\n        }\n    }\n\n    return 99;\n  };\n\n  const calculateWinner = () => {\n    let winner = [];\n    fightResult.Rounds.map(round => winner.push(roundWinner(round)));\n    return winner;\n  };\n\n  const calculateMatchWinner = () => {\n    let winner = [];\n    let counts = [0, 0, 0];\n    fightResult.Rounds.map(round => winner.push(roundWinner(round)));\n\n    for (const num of winner) {\n      counts[num] = counts[num] ? counts[num] + 1 : 1;\n    }\n\n    if (counts[1] > 1 || counts[1] > 0 && counts[0] > 1) return 1;else if (counts[2] > 1 || counts[2] > 0 && counts[0] > 1) return 2;else if (counts[0] > 1) return 0;\n    return 99;\n  };\n\n  const validateForm = () => {\n    let err = 0;\n    if (warrior.name.length <= 0) err = 1;else if (warrior.name.length >= 26) err = 2;else if (!warriorTypeSet.has(warrior.warriorType)) err = 3;else if (warrior.attacks.length !== 3) err = 4;else if (!warriorAttacksSet.has(warrior.attacks[0])) err = 5;else if (!warriorAttacksSet.has(warrior.attacks[1])) err = 6;else if (!warriorAttacksSet.has(warrior.attacks[2])) err = 7;\n\n    if (err === 0) {\n      Register(warrior).then(result => {\n        if (result.data.result.id) {\n          setCurrentFightId(result.data.result.id);\n          setWaitingScreen(true);\n        }\n      });\n    } else {\n      setMessage(errors[err - 1]);\n      setSeverity(\"error\");\n      setDialogOpen(true);\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      maxWidth: \"45vw\",\n      marginLeft: \"30vw\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Dialog, {\n      severity: severity,\n      open: dialogOpen,\n      setOpen: setDialogOpen,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), warriorSelection ? /*#__PURE__*/_jsxDEV(SelectWarrior, {\n      warrior: warrior,\n      setWarrior: setWarrior,\n      setWarriorSelection: setWarriorSelection\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }, this) : waitingScreen ? /*#__PURE__*/_jsxDEV(Waiting, {\n      warrior: warrior,\n      currentFightId: currentFightId,\n      setCurrentFightId: setCurrentFightId,\n      setWaitingScreen: setWaitingScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this) : fightingScreen && fightResult ? /*#__PURE__*/_jsxDEV(Fighting, {\n      warrior: warrior,\n      fightResult: fightResult,\n      setSeverity: setSeverity,\n      setMessage: setMessage,\n      setDialogOpen: setDialogOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this) : doneScreen ? /*#__PURE__*/_jsxDEV(Done, {\n      fightResult: fightResult,\n      calculateMatchWinner: calculateMatchWinner,\n      calculateWinner: calculateWinner,\n      setDoneScreen: setDoneScreen,\n      setWaitingScreen: setWaitingScreen,\n      validateForm: validateForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Home, {\n      warrior: warrior,\n      setWarrior: setWarrior,\n      setWarriorSelection: setWarriorSelection,\n      validateForm: validateForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Router, \"jiN1m3GrBFnbIKfhDgnvO5Ev7XA=\");\n\n_c = Router;\nexport default Router;\n\nvar _c;\n\n$RefreshReg$(_c, \"Router\");","map":{"version":3,"names":["useEffect","useState","Register","Status","Dialog","errors","Home","SelectWarrior","Waiting","Fighting","Done","Router","warrior","setWarrior","name","warriorType","attacks","dialogOpen","setDialogOpen","warriorSelection","setWarriorSelection","waitingScreen","setWaitingScreen","fightingScreen","setFightingScreen","doneScreen","setDoneScreen","message","setMessage","severity","setSeverity","fightResult","setFightResult","ID","Warrior1","Name","WarriorType","Attacks","Warrior2","Rounds","Warrior1Attack","Warrior2Attack","warriorTypeSet","Set","warriorAttacksSet","currentFightId","setCurrentFightId","interval","setInterval","then","result","data","fight","console","log","clearInterval","roundWinner","r","calculateWinner","winner","map","round","push","calculateMatchWinner","counts","num","validateForm","err","length","has","id","textAlign","maxWidth","marginLeft"],"sources":["/Users/mario/Documents/GitHub/whawhai/src/components/Router.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Warrior } from \"../utils/warriors\";\r\nimport { Register, Status } from \"../api/axios\";\r\nimport Dialog from \"./common/Dialog\";\r\nimport { errors } from \"../utils/errors\";\r\nimport Home from \"../views/Home\";\r\nimport SelectWarrior from \"../views/SelectWarrior\";\r\nimport Waiting from \"../views/Waiting\";\r\nimport Fighting from \"../views/Fighting\";\r\nimport Done from \"../views/Done\";\r\n\r\ninterface FightWarrior {\r\n  Name: string;\r\n  WarriorType: number;\r\n  Attacks: number[];\r\n}\r\n\r\ninterface Round {\r\n  Warrior1Attack: number;\r\n  Warrior2Attack: number;\r\n}\r\n\r\nexport interface Fight {\r\n  ID: string;\r\n  Status: number;\r\n  Warrior1: FightWarrior;\r\n  Warrior2: FightWarrior;\r\n  Rounds: Round[];\r\n  Err?: any;\r\n}\r\n\r\nconst Router = () => {\r\n  const [warrior, setWarrior] = useState<Warrior>({\r\n    name: \"\",\r\n    warriorType: 0,\r\n    attacks: [-99, -99, -99],\r\n  });\r\n\r\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false);\r\n  const [warriorSelection, setWarriorSelection] = useState<boolean>(false);\r\n  const [waitingScreen, setWaitingScreen] = useState<boolean>(false);\r\n  const [fightingScreen, setFightingScreen] = useState<boolean>(false);\r\n  const [doneScreen, setDoneScreen] = useState<boolean>(false);\r\n\r\n  const [message, setMessage] = useState<string>(\"\")\r\n  const [severity, setSeverity] = useState<string>(\"info\")\r\n\r\n  const [fightResult, setFightResult] = useState<Fight>({\r\n    ID: \"\",\r\n    Status: 0,\r\n    Warrior1: { Name: \"\", WarriorType: 0, Attacks: [0] },\r\n    Warrior2: { Name: \"\", WarriorType: 0, Attacks: [0] },\r\n    Rounds: [{ Warrior1Attack: 0, Warrior2Attack: 0 }],\r\n  });\r\n\r\n  const warriorTypeSet: Set<number> = new Set([0, 1, 2, 3, 4]);\r\n  const warriorAttacksSet: Set<number> = new Set([0, 1, 2]);\r\n\r\n  const [currentFightId, setCurrentFightId] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if ((waitingScreen || fightingScreen) && currentFightId) {\r\n        Status(currentFightId).then((result) => {\r\n          if (result.data) {\r\n            if (result.data.result.fight.Status === 1) {\r\n              setWaitingScreen(false);\r\n              setFightingScreen(true);\r\n              setDoneScreen(false);\r\n              setFightResult(result.data.result.fight);\r\n            }\r\n            if (result.data.result.fight.Status === 2) {\r\n              setDialogOpen(false);\r\n              setWaitingScreen(false);\r\n              setFightingScreen(false);\r\n              setDoneScreen(true);\r\n              setFightResult(result.data.result.fight);\r\n            }\r\n          }\r\n          else console.log(result)\r\n        });\r\n      }\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [waitingScreen, fightingScreen, currentFightId]);\r\n\r\n  const roundWinner = (r: Round): number => {\r\n    switch (r.Warrior1Attack) {\r\n      case 0: {\r\n        if (r.Warrior2Attack === 0) return 0; //paper - paper: tie\r\n        else if (r.Warrior2Attack === 1) return 2; //paper - scissors - w2\r\n        else if (r.Warrior2Attack === 2) return 1; //paper - rock - w1\r\n        break;\r\n      }\r\n      case 1: {\r\n        if (r.Warrior2Attack === 0) return 1; //scissors - paper: w1\r\n        else if (r.Warrior2Attack === 1) return 0; //scissors - scissors - tie\r\n        else if (r.Warrior2Attack === 2) return 2; //scissors - rock - w2\r\n        break;\r\n      }\r\n      case 2: {\r\n        if (r.Warrior2Attack === 0) return 2; //rock - paper: w2\r\n        else if (r.Warrior2Attack === 1) return 1; //rock - scissors - w1\r\n        else if (r.Warrior2Attack === 2) return 0; //rock - rock - tie\r\n        break;\r\n      }\r\n    }\r\n    return 99;\r\n  };\r\n\r\n  const calculateWinner = () => {\r\n    let winner: number[] = [];\r\n    fightResult.Rounds.map((round) =>\r\n      winner.push(roundWinner(round))\r\n    );\r\n    return winner;\r\n  };\r\n\r\n  const calculateMatchWinner = () => {\r\n    let winner: number[] = [];\r\n    let counts: number[] = [0, 0, 0];\r\n    fightResult.Rounds.map((round) =>\r\n      winner.push(roundWinner(round))\r\n    );\r\n    for (const num of winner) {\r\n      counts[num] = counts[num] ? counts[num] + 1 : 1;\r\n    }\r\n    if (counts[1] > 1 || (counts[1] > 0 && counts[0] > 1)) return 1;\r\n    else if (counts[2] > 1 || (counts[2] > 0 && counts[0] > 1)) return 2;\r\n    else if (counts[0] > 1) return 0;\r\n    return 99;\r\n  };\r\n\r\n  const validateForm = () => {\r\n    let err: number = 0;\r\n    if (\r\n      warrior.name.length <= 0) err = 1\r\n    else if (\r\n      warrior.name.length >= 26) err = 2\r\n    else if (!warriorTypeSet.has(warrior.warriorType)) err = 3\r\n    else if (warrior.attacks.length !== 3) err = 4\r\n    else if (!warriorAttacksSet.has(warrior.attacks[0])) err = 5\r\n    else if (!warriorAttacksSet.has(warrior.attacks[1])) err = 6\r\n    else if (!warriorAttacksSet.has(warrior.attacks[2])) err = 7\r\n    if (err === 0) {\r\n      Register(warrior).then((result) => {\r\n        if (result.data.result.id) {\r\n          setCurrentFightId(result.data.result.id);\r\n          setWaitingScreen(true);\r\n        }\r\n      });\r\n    } else { setMessage(errors[err - 1]); setSeverity(\"error\"); setDialogOpen(true) };\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        textAlign: \"center\",\r\n        maxWidth: \"45vw\",\r\n        marginLeft: \"30vw\",\r\n      }}\r\n    >\r\n      <Dialog severity={severity} open={dialogOpen} setOpen={setDialogOpen} message={message} />\r\n      {warriorSelection ? (\r\n        <SelectWarrior warrior={warrior} setWarrior={setWarrior} setWarriorSelection={setWarriorSelection} />\r\n      ) : waitingScreen ? (\r\n        <Waiting warrior={warrior} currentFightId={currentFightId} setCurrentFightId={setCurrentFightId} setWaitingScreen={setWaitingScreen} />\r\n      ) : fightingScreen && fightResult ? (\r\n        <Fighting warrior={warrior} fightResult={fightResult} setSeverity={setSeverity} setMessage={setMessage} setDialogOpen={setDialogOpen} />\r\n      ) : doneScreen ? (\r\n        <Done fightResult={fightResult} calculateMatchWinner={calculateMatchWinner} calculateWinner={calculateWinner} setDoneScreen={setDoneScreen} setWaitingScreen={setWaitingScreen} validateForm={validateForm} />\r\n      ) : (\r\n        <Home warrior={warrior} setWarrior={setWarrior} setWarriorSelection={setWarriorSelection} validateForm={validateForm} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Router;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}